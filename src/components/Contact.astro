---
import { useState } from 'react';

const initialFormData = {
  name: '',
  subject: '',
  description: '',
  honeypot: '' // Anti-bot field
};
---

<section id="contact" class="py-32 bg-dark-800">
  <div class="container mx-auto px-6 max-w-7xl">
    <h2 class="text-4xl font-bold mb-16 text-center" data-aos="fade-up">
      Contacto
    </h2>

    <div class="max-w-2xl mx-auto">
      <div 
        class="bg-dark-700 p-8 rounded-lg border border-dark-700"
        data-aos="fade-up"
      >
        <!-- Gmail-style Header -->
        <div class="flex items-center gap-4 mb-8">
          <div class="w-10 h-10 bg-primary rounded-lg flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
          </div>
          <h3 class="text-2xl font-bold">Nuevo Mensaje</h3>
        </div>

        <form 
          id="contactForm"
          class="space-y-6"
          onsubmit="return false;"
        >
          <!-- Anti-bot honeypot field (hidden) -->
          <div class="hidden">
            <input 
              type="text" 
              name="honeypot"
              id="honeypot"
              tabindex="-1"
              autocomplete="off"
            />
          </div>

          <!-- Subject field -->
          <div>
            <label for="subject" class="block text-sm font-medium text-gray-300 mb-2">
              Asunto
            </label>
            <input
              type="text"
              id="subject"
              name="subject"
              required
              class="w-full px-4 py-3 bg-dark-800 border border-dark-700 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-colors text-white"
              placeholder="Asunto del mensaje"
            />
          </div>

          <!-- Description field -->
          <div>
            <label for="description" class="block text-sm font-medium text-gray-300 mb-2">
              Descripción
            </label>
            <textarea
              id="description"
              name="description"
              required
              rows="6"
              class="w-full px-4 py-3 bg-dark-800 border border-dark-700 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-colors text-white resize-none"
              placeholder="Escribe tu mensaje aquí..."
            ></textarea>
          </div>

          <!-- Submit button -->
          <div class="flex justify-end">
            <button
              type="submit"
              class="bg-primary hover:bg-primary/90 text-white px-8 py-3 rounded-lg transition-colors flex items-center gap-2"
            >
              Enviar
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" />
              </svg>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<script>
  // Anti-bot validation
  document.getElementById('contactForm')?.addEventListener('submit', (e) => {
    e.preventDefault();
    
    const honeypot = (document.getElementById('honeypot') as HTMLInputElement)?.value;
    if (honeypot) {
      console.log('Bot detected');
      return;
    }

    const subject = (document.getElementById('subject') as HTMLInputElement)?.value;
    const description = (document.getElementById('description') as HTMLTextAreaElement)?.value;

    // Here you would typically send the data to your backend
    console.log('Form submitted:', { subject, description });
    
    // For demo purposes, open Gmail compose
    const gmailUrl = `https://mail.google.com/mail/?view=cm&fs=1&to=tu@email.com&su=${encodeURIComponent(subject)}&body=${encodeURIComponent(description)}`;
    window.open(gmailUrl, '_blank');
  });
</script>